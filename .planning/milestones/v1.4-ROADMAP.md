# Milestone v1.4: Control Mode Fixes

**Status:** SHIPPED 2026-01-28
**Phases:** 10-11
**Total Plans:** 2

## Overview

Kontrol modu geçişleri ve başlangıç davranışı düzeltmeleri — AI mode switch hatası ve manuel mod initial delay sorunu çözüldü.

## Phases

### Phase 10: AI Mode Switch Fix

**Goal**: GUI thread'den asyncio çağrısı için cross-thread coordination
**Depends on**: Phase 9 (previous milestone complete)
**Plans**: 1 plan

Plans:
- [x] 10-01: Cross-thread asyncio scheduling fix — completed 2026-01-15

**Details:**
- Event loop captured in lifecycle.py and passed through GUI initialization chain
- ControlPanelController uses asyncio.run_coroutine_threadsafe() for mode switching
- ControlPanelController uses asyncio.run_coroutine_threadsafe() for manual speed commands

**Files Modified:**
- src/core/lifecycle.py
- src/gui/app.py
- src/gui/controllers/main_controller.py
- src/gui/controllers/control_panel_controller.py

### Phase 11: Initial Delay Logic

**Goal**: Manuel mod için `initial_delay=False` default, ML mod için mevcut davranış korunsun
**Depends on**: Phase 10
**Plans**: 1 plan

Plans:
- [x] 11-01: Mode-aware initial delay logic — completed 2026-01-15

**Details:**
- Initial delay check moved inside ML mode branch only
- Manual mode now skips delay entirely for immediate operator control
- Docstrings updated to reflect mode-aware behavior

**Files Modified:**
- src/services/control/manager.py

---

## Milestone Summary

**Key Decisions:**
- Use asyncio.run_coroutine_threadsafe() for GUI→main thread async scheduling (proper cross-thread mechanism)
- Pass event loop as optional parameter for backward compatibility
- Move initial delay check inside ML branch only (cleaner separation of concerns)

**Issues Resolved:**
- AI mode switch button causing "no running event loop" error
- Manual mode having unnecessary initial delay on first cut

**Issues Deferred:**
None

**Technical Debt Incurred:**
None

---

_For current project status, see .planning/ROADMAP.md_
